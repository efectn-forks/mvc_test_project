@using mvc_proje.Application.Dtos.Admin.Category
@using mvc_proje.Domain.Entities
@{
  Layout = "_AdminLayout";
}

@model mvc_proje.Application.Dtos.Admin.Product.ProductEditDto

<!--end::App Content Header-->
<!--begin::App Content-->
<div class="app-content">
  <!--begin::Container-->
  <div class="container-fluid">
    <!--begin::Row-->
    <div class="row">
      <div class="col-md-12">
        <div class="card mb-8">
          <div class="card card-primary card-outline mb-4">
            <!--begin::Form-->
            <form method="post" asp-action="Update" asp-controller="Product" asp-antiforgery="true" enctype="multipart/form-data">
              <input type="hidden" asp-for="Id" value="@Model.Id"/>
              <!--begin::Body-->
              <div class="card-body">
                <div class="mb-3">
                  <label for="name" class="form-label">İsim</label>
                  <input
                    type="text"
                    name="name"
                    class="form-control"
                    value="@Model.Name"
                    id="name"/>
                </div>

                <div class="mb-3">
                  <label for="SkuNumber" class="form-label">SKU Numarası</label>
                  <input
                    type="text"
                    name="SkuNumber"
                    class="form-control"
                    value="@Model.SkuNumber"
                    id="SkuNumber"/>
                </div>

                <div class="mb-3">
                  <label for="description" class="form-label">Açıklama</label>
                  <textarea class="form-control" name="description" id="description">@Model.Description</textarea>
                </div>

                <div class="row mb-3">
                  <div class="col-6">
                    <label for="price" class="form-label">Fiyat</label>
                    <input type="text" class="form-control" name="price" id="price" value="@Model.Price"/>
                  </div>
                  <div class="col-6">
                    <label for="stock" class="form-label">Stok</label>
                    <input type="text" class="form-control" name="stock" id="stock" value="@Model.Stock"/>
                  </div>
                </div>

                <div class="mb-3">
                  <label for="CategoryId" class="form-label">Kategori</label>
                  <select class="form-select" name="CategoryId" id="CategoryId" aria-label="Default select example">
                    @foreach (var category in (ViewData["categories"] as CategoryIndexDto).Categories)
                    {
                      var selected = Model.CategoryId == category.Id ? "selected" : "";


                      <option value="@category.Id" selected="@selected">@category.Name</option>
                    }
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="Image" class="form-label">Resim</label>
                  <input
                    type="file"
                    name="Image"
                    class="form-control"
                    id="Image"/>
                </div>
                
                @if (Model.ImageUrl != null)
                {
                  <div class="mb-3">
                    <img src="@Url.Content(Model.ImageUrl)" width="500" height="500" alt="Post Image" class="img-fluid"/>
                  </div>
                }
              </div>
              <!--end::Body-->
              <!--begin::Footer-->
              <div class="card-footer">
                <button type="submit" class="btn btn-primary">Gönder</button>
              </div>
              <!--end::Footer-->
            </form>
            <!--end::Form-->
          </div>
        </div>
      </div>
    </div>
    <!--end::Row-->
  </div>
  <!--end::Container-->
</div>