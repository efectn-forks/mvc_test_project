<script>
  $(document).ready(function () {
    $('#summernote').summernote({
      height: 300,
      callbacks: {
        onImageUpload: function (files) {
          for (let i = 0; i < files.length; i++) {
            uploadImage(files[i]);
          }
        }
      }
    });
  });

  function uploadImage(file) {
    let data = new FormData();
    data.append("file", file);

    $.ajax({
      url: '/admin/image/editor-upload',
      type: "POST",
      data: data,
      contentType: false,
      processData: false,
      success: function (url) {
        $('#summernote').summernote('insertImage', url);
      },
      error: function (xhr) {
        alert(xhr.responseText);
      }
    });
  }
</script>