@model mvc_proje.Application.Dtos.Profile.ProfileDto
<style>
    .profile-page {
        padding: 40px 0 80px;
    }

    .profile-header {
        background: linear-gradient(rgba(74, 124, 15, 0.9), rgba(74, 124, 15, 0.8)), url('https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
        background-size: cover;
        background-position: center;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
        color: white;
        position: relative;
    }

    .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 4px solid white;
        overflow: hidden;
        margin-right: 25px;
    }

    .profile-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        padding: 30px;
        margin-bottom: 30px;
    }

    .profile-tabs .nav-link {
        color: #555;
        font-weight: 500;
        padding: 12px 20px;
        border-radius: 8px;
        margin-right: 10px;
    }

    .profile-tabs .nav-link.active {
        background: #e8f5e9;
        color: #4a7c0f;
        font-weight: 600;
    }

    .tab-content {
        padding-top: 30px;
    }

    .profile-detail-row {
        display: flex;
        padding: 15px 0;
        border-bottom: 1px solid #eee;
    }

    .profile-detail-row:last-child {
        border-bottom: none;
    }

    .detail-label {
        width: 150px;
        color: #555;
        font-weight: 500;
    }

    .detail-value {
        flex: 1;
        color: #333;
    }

    .order-table {
        width: 100%;
        border-collapse: collapse;
    }

    .order-table th {
        background: #f9f9f9;
        padding: 15px;
        text-align: left;
        font-weight: 600;
        color: #555;
        border-bottom: 2px solid #eee;
    }

    .order-table td {
        padding: 15px;
        border-bottom: 1px solid #eee;
        color: #555;
    }

    .order-status {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 500;
    }

    .status-pending {
        background: #fff3cd;
        color: #856404;
    }

    .status-delivered {
        background: #d4edda;
        color: #155724;
    }

    .status-shipped {
        background: #cce5ff;
        color: #004085;
    }

    .comment-card {
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #eee;
        margin-bottom: 20px;
        transition: all 0.3s;
    }

    .comment-card:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        border-color: #ddd;
    }

    .comment-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }

    .comment-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
        margin-right: 15px;
    }

    .comment-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .comment-meta h5 {
        margin-bottom: 5px;
    }

    .comment-meta .post-link {
        color: #4a7c0f;
        font-weight: 500;
    }

    .comment-date {
        color: #999;
        font-size: 0.9rem;
    }

    .comment-content {
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
    }

    .comment-actions {
        display: flex;
        gap: 15px;
        margin-top: 15px;
    }

    .action-btn {
        background: none;
        border: none;
        color: #777;
        font-size: 0.9rem;
        cursor: pointer;
        padding: 5px 10px;
        border-radius: 4px;
    }

    .action-btn:hover {
        background: #f1f1f1;
        color: #333;
    }

    .edit-icon {
        position: absolute;
        top: 30px;
        right: 30px;
        background: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #4a7c0f;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        cursor: pointer;
    }

    @@media (max-width: 768px) {
    .profile-header {
        text-align: center;
    }

    .profile-info {
        flex-direction: column;
        align-items: center;
    }

    .profile-avatar {
        margin-right: 0;
        margin-bottom: 20px;
    }

    .detail-label {
        width: 100%;
        margin-bottom: 5px;
    }

    .order-table {
        display: block;
        overflow-x: auto;
    }
    }
</style>

<!-- Page Header Start -->
<div class="container-fluid page-header mb-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container">
        <h1 class="display-3 mb-3 animated slideInDown">User Profile</h1>
        <nav aria-label="breadcrumb animated slideInDown">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a class="text-body" asp-controller="Homepage" asp-action="Index">Home</a>
                </li>
                <li class="breadcrumb-item text-dark active" aria-current="page">Profile</li>
            </ol>
        </nav>
    </div>
</div>
<!-- Page Header End -->

<!-- Profile Section Start -->
<div class="container-xxl profile-page">
    <div class="container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="edit-icon">
                <a asp-controller="Profile" asp-action="Edit"><i class="fas fa-pencil-alt"></i></a>
            </div>
            <div class="d-flex align-items-center profile-info">
                <div class="profile-avatar">
                    <img
                        src="@(string.IsNullOrEmpty(Model.AvatarUrl) ? "https://via.placeholder.com/150" : Url.Content(Model.AvatarUrl))"
                        alt="User Avatar">
                </div>
                <div>
                    <h2 class="text-white mb-1">@Model.Username - @Model.FullName</h2>
                    <div class="d-flex mt-2">
                        <span class="badge bg-light text-dark"><i
                                class="fa fa-shopping-bag me-1"></i> @Model.Orders.Count()
                            Orders</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Navigation Tabs -->
        <ul class="nav nav-tabs profile-tabs" id="profileTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details"
                        type="button" role="tab">Profile Details
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders" type="button"
                        role="tab">Order History
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="comments-tab" data-bs-toggle="tab" data-bs-target="#comments"
                        type="button" role="tab">My Comments
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="profileTabContent">
            <!-- Profile Details Tab -->
            <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="details-tab">
                <div class="profile-card">
                    <h4 class="mb-4">Personal Information</h4>
                    <div class="profile-detail-row">
                        <div class="detail-label">Username</div>
                        <div class="detail-value">@Model.Username</div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">Full Name</div>
                        <div class="detail-value">@Model.FullName</div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">Email Address</div>
                        <div class="detail-value">@Model.Email</div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">Phone Number</div>
                        <div class="detail-value">@Model.PhoneNumber</div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">Date of Birth</div>
                        <div class="detail-value">@Model.BirthDate</div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">Identity Number</div>
                        <div class="detail-value">@Model.IdentifyNumber</div>
                    </div>

                    <h4 class="my-4">Address Information</h4>
                    <div class="profile-detail-row">
                        <div class="detail-label">Address</div>
                        <div class="detail-value">
                            <p class="mb-0">@Model.Address</p>
                        </div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">City / Country</div>
                        <div class="detail-value">
                            <p class="mb-0">@Model.City / @Model.Country</p>
                        </div>
                    </div>
                    <div class="profile-detail-row">
                        <div class="detail-label">Zip Code</div>
                        <div class="detail-value">
                            <p class="mb-0">@Model.ZipCode</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order History Tab -->
            <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                <div class="profile-card">
                    <h4 class="mb-4">Order History</h4>
                    <div class="table-responsive">
                        <table class="order-table">
                            <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Payment</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tbody>
                            @foreach (var order in Model.Orders)
                            {
                                <tr>
                                    <td>#@order.OrderNumber</td>
                                    <td>@order.CreatedAt.ToShortDateString() @order.CreatedAt.ToShortTimeString()</td>
                                    <td>@order.OrderItems.Sum(i => i.Quantity) items</td>
                                    <td>$@order.OrderItems.Sum(i => i.Quantity * i.UnitPrice)</td>
                                    <td>@order.PaymentStatus</td>
                                    <td><span class="order-status status-delivered">@order.GetLatestTrack().Status</span></td>
                                    <td><a asp-controller="Cart" asp-action="OrderTrack" asp-route-orderId="@order.Id" class="btn btn-sm btn-outline-primary">View</a></td>
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Comments Tab -->
            <div class="tab-pane fade" id="comments" role="tabpanel" aria-labelledby="comments-tab">
                <div class="profile-card">
                    <h4 class="mb-4">My Comments</h4>
                    
                    @foreach(var comment in Model.Comments)
                    {
                        <div class="comment-card">
                            <div class="comment-header">
                                <div class="comment-avatar">
                                    <img src="@Url.Content(Model.AvatarUrl ?? "https://via.placeholder.com/40")"
                                         alt="User Avatar">
                                </div>
                                <div class="comment-meta">
                                    <h5 class="mb-0">@Model.Username</h5>
                                    <p class="mb-0">On: <a asp-controller="Homepage" asp-action="Post" asp-route-id="@comment.Post.Id" class="post-link">@comment.Post.Title</a></p>
                                    <div class="comment-date">Posted on @comment.CreatedAt.ToShortDateString()</div>
                                </div>
                            </div>
                            <div class="comment-content">
                                <p>@comment.Text</p>
                            </div>
                            <div class="comment-actions">
                                <a class="action-btn" asp-controller="Homepage" asp-action="DeleteComment" asp-route-id="@comment.Id"><i class="fas fa-trash-alt me-1"></i> Delete</a>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Profile Section End -->